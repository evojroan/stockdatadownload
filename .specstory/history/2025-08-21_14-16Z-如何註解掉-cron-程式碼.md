<!-- Generated by SpecStory -->

# 如何註解掉 cron 程式碼 (2025-08-21 14:16Z)

_**User**_

我希望不要被 cron 控制時間，如何把 cron 程式碼註解掉

---

_**Assistant**_

我需要先查看您的 `app.js` 檔案內容，以找到 cron 相關的程式碼並幫您註解掉。


---

Read file: app.js

---

我已經找到您的 cron 程式碼。要註解掉 cron 控制時間，您需要註解掉兩個 `cron.schedule` 區塊。以下是修改方式：


---

<details><summary>Edit file: app.js</summary>

我將註解掉兩個 cron.schedule 區塊，讓程式不再被 cron 控制時間

**Chunk 1**
Lines added: 75, lines removed: 75

```diff
@@ -26,93 +26,93 @@
  
  //每週一到五自動下載檔案
- cron.schedule("30 18 * * 1-5", async () => {
-   const browser = await chromium.launch({headless: false});
-   const page = await browser.newPage();
-   console.log("Cron 開始執行股票資料下載...");
+ // cron.schedule("30 18 * * 1-5", async () => {
+ //   const browser = await chromium.launch({headless: false});
+ //   const page = await browser.newPage();
+ //   console.log("Cron 開始執行股票資料下載...");
  
-   // 每日上市收盤價
-   await page.goto(
-     "https://www.twse.com.tw/zh/trading/historical/mi-index.html"
-   );
-   await page.selectOption("#label1", "ALLBUT0999");
-   await page.click("button.search");
-   await page.waitForTimeout(2000);
+ //   // 每日上市收盤價
+ //   await page.goto(
+ //     "https://www.twse.com.tw/zh/trading/historical/mi-index.html"
+ //   );
+ //   await page.selectOption("#label1", "ALLBUT0999");
+ //   await page.click("button.search");
+ //   await page.waitForTimeout(2000);
  
-   let downloadPromise = page.waitForEvent("download");
-   await page.click("button.csv");
+ //   let downloadPromise = page.waitForEvent("download");
+ //   await page.click("button.csv");
  
-   let download = await downloadPromise;
-   await fs.mkdir(todayDate, {recursive: true});
-   await download.saveAs(`${todayDate}/${todayDate}上市收盤價.csv`);
+ //   let download = await downloadPromise;
+ //   await fs.mkdir(todayDate, {recursive: true});
+ //   await download.saveAs(`${todayDate}/${todayDate}上市收盤價.csv`);
  
-   //每日上櫃收盤價
-   await page.goto(
-     "https://www.tpex.org.tw/web/stock/aftertrading/daily_close_quotes/stk_quote.php?l=zh-tw"
-   );
-   await page.waitForTimeout(2500);
+ //   //每日上櫃收盤價
+ //   await page.goto(
+ //     "https://www.tpex.org.tw/web/stock/aftertrading/daily_close_quotes/stk_quote.php?l=zh-tw"
+ //   );
+ //   await page.waitForTimeout(2500);
  
-   downloadPromise = page.waitForEvent("download");
-   await page.click('button.response[data-format="csv"]');
+ //   downloadPromise = page.waitForEvent("download");
+ //   await page.click('button.response[data-format="csv"]');
  
-   try {
-     download = await downloadPromise;
-     await download.saveAs(`${todayDate}/${todayDate}上櫃收盤價.csv`);
-   } catch (error) {
-     console.error("下載上櫃收盤價時出錯:", error);
-   }
+ //   try {
+ //     download = await downloadPromise;
+ //     await download.saveAs(`${todayDate}/${todayDate}上櫃收盤價.csv`);
+ //   } catch (error) {
+ //     console.error("下載上櫃收盤價時出錯:", error);
+ //   }
  
-   //每日上市買賣超
-   await page.goto("https://www.twse.com.tw/zh/trading/foreign/t86.html");
-   await page.selectOption("#label1", "ALLBUT0999");
-   await page.click("button.search");
-   await page.waitForTimeout(2000);
+ //   //每日上市買賣超
+ //   await page.goto("https://www.twse.com.tw/zh/trading/foreign/t86.html");
+ //   await page.selectOption("#label1", "ALLBUT0999");
+ //   await page.click("button.search");
+ //   await page.waitForTimeout(2000);
  
-   downloadPromise = page.waitForEvent("download");
-   await page.click("button.csv");
-   download = await downloadPromise;
-   await fs.mkdir(todayDate, {recursive: true});
-   await download.saveAs(`${todayDate}/${todayDate}上市買賣超.csv`);
+ //   downloadPromise = page.waitForEvent("download");
+ //   await page.click("button.csv");
+ //   download = await downloadPromise;
+ //   await fs.mkdir(todayDate, {recursive: true});
+ //   await download.saveAs(`${todayDate}/${todayDate}上市買賣超.csv`);
  
-   //每日上櫃買賣超
-   await page.goto(
-     "https://www.tpex.org.tw/web/stock/3insti/daily_trade/3itrade_hedge.php?l=zh-tw"
-   );
-   await page.waitForTimeout(2500);
-   await page.selectOption("#___auto1", "EW");
-   await page.waitForTimeout(2000);
-   downloadPromise = page.waitForEvent("download");
-   await page.click('button.response[data-format="csv"]');
+ //   //每日上櫃買賣超
+ //   await page.goto(
+ //     "https://www.tpex.org.tw/web/stock/3insti/daily_trade/3itrade_hedge.php?l=zh-tw"
+ //   );
+ //   await page.waitForTimeout(2500);
+ //   await page.selectOption("#___auto1", "EW");
+ //   await page.waitForTimeout(2000);
+ //   downloadPromise = page.waitForEvent("download");
+ //   await page.click('button.response[data-format="csv"]');
  
-   try {
-     download = await downloadPromise;
-     await download.saveAs(`${todayDate}/${todayDate}上櫃買賣超.csv`);
-   } catch (error) {
-     console.error("下載上櫃買賣超時出錯:", error);
-   }
+ //   try {
+ //     download = await downloadPromise;
+ //     await download.saveAs(`${todayDate}/${todayDate}上櫃買賣超.csv`);
+ //   } catch (error) {
+ //     console.error("下載上櫃買賣超時出錯:", error);
+ //   }
  
-   await browser.close();
-   console.log("股票資料下載完成！");
- });
+ //   await browser.close();
+ //   console.log("股票資料下載完成！");
+ // });
  
  //每週六自動下載大戶資料
- cron.schedule("15 10 * * 6", async () => {
-   const browser = await chromium.launch({headless: false});
-   const page = await browser.newPage();
-   console.log("Cron 開始執行股票資料下載...");
+ // cron.schedule("15 10 * * 6", async () => {
+ //   const browser = await chromium.launch({headless: false});
+ //   const page = await browser.newPage();
+ //   console.log("Cron 開始執行股票資料下載...");
  
-   //週六日下載集保戶股權分散表
-   if (dayOfWeek === 6 || dayOfWeek === 0) {
-     await page.goto("https://data.gov.tw/dataset/11452");
-     await page.waitForTimeout(2000);
-     downloadPromise = page.waitForEvent("download");
-     await page.click(
-       'button.el-button.el-button--primary.is-plain span:has-text("CSV")'
-     );
-     download = await downloadPromise;
-     await download.saveAs(`${todayDate}/${todayDate}當週大股東持股.csv`);
-   }
+ //   //週六日下載集保戶股權分散表
+ //   if (dayOfWeek === 6 || dayOfWeek === 0) {
+ //     await page.goto("https://data.gov.tw/dataset/11452");
+ //     await page.waitForTimeout(2000);
+ //     downloadPromise = page.waitForEvent("download");
+ //     await page.click(
+ //       'button.el-button.el-button--primary.is-plain span:has-text("CSV")'
+ //     );
+ //     download = await downloadPromise;
+ //     await download.saveAs(`${todayDate}/${todayDate}當週大股東持股.csv`);
+ //   }
  
-   await browser.close();
-   console.log("集保戶股權分散表下載完成！");
- });
+ //   await browser.close();
+ //   console.log("集保戶股權分散表下載完成！");
+ // });
  
```

</details>

---

完成！我已經將您的 cron 程式碼註解掉了。

**總結：** 我已經註解掉兩個 `cron.schedule` 區塊，讓程式不再被 cron 控制時間。

現在您的程式將不會：
- 每週一到五下午6:30自動下載股票資料
- 每週六上午10:15自動下載大戶資料

如果您之後想要重新啟用這些自動化功能，只需要移除註解符號 `//` 即可。

---

